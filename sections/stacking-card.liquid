{{ 'stacking-card.css' | asset_url | stylesheet_tag }}
{%- render 'top-divider', show_top_divider: section.settings.show_top_divider, divider_top_width: section.settings.divider_top_width -%}
<div class="stack-cards-container section-padding section-bg" {% render 'section-attributes' %}>
  <div class="{{ section.settings.section_width }}">
    {% render 'section-header', layout_header: section.settings.layout, subheading: section.settings.subheading, heading: section.settings.heading, description: section.settings.description, class:"header-stacking-card", heading_size: section.settings.heading_size_section %}
    <stack-cards class="stack-cards grid gap-16" style="--stack-cards-gap: 20px;">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'card' %}
            {%- assign vertical_alignment = block.settings.vertical_alignment -%}
            {%- assign text_alignment = block.settings.text_alignment -%}
            <div class="js-stack-cards__item stack-cards__item global-radius overflow-hidden" style="--stack-cards-item-bg-color: {{ block.settings.bg_color.rgb }}; --color-heading:{{ block.settings.text_color.rgb }}; --color-foreground:{{ block.settings.text_color.rgb }};" {{ block.shopify_attributes }}>
              <div class="stack-cards__item-content grid md:grid-cols-2">
                
                <div class="flex items-{{ vertical_alignment }} text-{{ text_alignment }} justify-{{ text_alignment }}">
                  <div class="stack-cards__item-content-text p-14 lg:p-20">
                    {%- if block.settings.subheading != blank -%}
                      <p class="sub-heading">
                        {{ block.settings.subheading }}
                      </p>
                    {%- endif -%}
                    {%- if block.settings.heading != blank -%}
                      <div class="inline-richtext {{ block.settings.heading_size }}">
                        {{ block.settings.heading }}
                      </div>
                    {%- endif -%}
                    {%- if block.settings.text != blank -%}
                      <div class="rte">
                        {{ block.settings.text }}
                      </div>
                    {%- endif -%}
                    {%- if block.settings.button_label != blank -%}
                      {%- render 'button',
                          button_style: block.settings.button_type,
                          button_text: block.settings.button_label,
                          button_url:  block.settings.button_link,
                          button_type: 'link',
                          show_icon: block.settings.show_icon,
                      -%}
                    {%- endif -%}
                  </div>
                </div>
                <div class="stack-cards__item-content-image {% if block.settings.media_placement == 'left' %} md:-order-1 {% endif %}">
                  {% if block.settings.image != blank %}
                    {% render 'responsive-image', image: block.settings.image, decoding:"async", image_aspect_ratio : block.settings.media_size, sizes: '50vw', class: 'no-radius' %}
                  {% else %}
                  {% render 'placeholder-image', image_placeholder : 'image', image_aspect_ratio : block.settings.media_size %}
                  {% endif %}
                </div>
            </div>
          </div>
        {% endcase %}
      {% endfor %}
    </stack-cards>
  </div>
</div>
{%- render 'bottom-divider', show_bottom_divider: section.settings.show_bottom_divider, divider_bottom_width: section.settings.divider_bottom_width -%}
<script src="{{ 'stacking-card.js' | asset_url }}" defer></script>
{% schema %}
{
  "name": "Stacking Card",
  "tag": "section",
  "disabled_on": {
    "groups": ["header", "footer", "aside"]
  },
  "settings": [
    {
      "type": "select",
      "id": "section_width",
      "label": "Width",
      "options": [
        {
          "value": "container",
          "label": "Boxed"
        },
        {
          "value": "container-fluid",
          "label": "Wide"
        },
        {
          "value": "w-full",
          "label": "Full"
        }
      ],
      "default": "container"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Sub heading"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "Stacking Card",
      "label": "Heading"
    },
    {
      "type": "select",
      "id": "heading_size_section",
      "label": "Heading size",
      "options": [
          {
              "value": "h1",
              "label": "Heading 1"
          },
          {
              "value": "h2",
              "label": "Heading 2"
          },
          {
              "value": "h3",
              "label": "Heading 3"
          },
          {
              "value": "h4",
              "label": "Heading 4"
          },
          {
              "value": "h5",
              "label": "Heading 5"
          },
          {
              "value": "h6",
              "label": "Heading 6"
          }
      ],
      "default": "h2"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Add a short description for this section</p>"
    },
    {
        "type": "select",
        "id": "layout",
        "label": "Layout",
        "options": [
            {
                "value": "horizontal",
                "label": "Horizontal"
            },
            {
                "value": "vertical",
                "label": "Vertical"
            }
        ],
        "default": "vertical"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text"
    },
    {
        "type": "color",
        "id": "border_color",
        "label": "Border"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    },
    {
      "type": "header",
      "content": "Section divider"
    },
    {
      "type": "checkbox",
      "id": "show_top_divider",
      "label": "Show top divider",
      "default": false
    },
    {
      "type": "select",
      "id": "divider_top_width",
      "label": "Divider top width",
      "options": [
        {
          "value": "container",
          "label": "Boxed"
        },
        {
          "value": "container-fluid",
          "label": "Wide"
        },
        {
          "value": "w-full",
          "label": "Full"
        }
      ],
      "default": "container"
    },
    {
      "type": "checkbox",
      "id": "show_bottom_divider",
      "label": "Show bottom divider",
      "default": false
    },
    {
      "type": "select",
      "id": "divider_bottom_width",
      "label": "Divider bottom width",
      "options": [
        {
          "value": "container",
          "label": "Boxed"
        },
        {
          "value": "container-fluid",
          "label": "Wide"
        },
        {
          "value": "w-full",
          "label": "Full"
        }
      ],
      "default": "container"
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "media_size",
          "options": [
              { "value": "adapt","label": "Adapt to image" },
              { "value": "square","label": "Square(1:1)" },
              { "value": "portrait","label": "Portrait (2:3)" },
              { "value": "landscape","label": "Landscape (4:3)" },
              { "value": "landscape-v2","label": "Landscape (5:3.5)" },
              { "value": "wide","label": "Wide (16:9)" }
          ],
          "default": "square",
          "label": "Media size"
        },
        {
          "type": "select",
          "id": "media_placement",
          "options": [
            { "value": "left","label": "Left" },
            { "value": "right","label": "Right" }
          ],
          "default": "right",
          "label": "Media placement"
        },
        {
          "type": "header",
          "content": "Content settings"
        },
        {
          "type": "text",
          "id": "subheading",
          "default": "Subheading",
          "label": "Subheading"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Text"
        },
        {
          "type": "select",
          "id": "heading_size",
          "label": "Heading size",
          "options": [
            {
              "value": "hxl",
              "label": "Heading xl"
            },
            {
              "value": "h0",
              "label": "Heading 0"
            },
            {
              "value": "h1",
              "label": "Heading 1"
            },
            {
              "value": "h2",
              "label": "Heading 2"
            },
            {
              "value": "h3",
              "label": "Heading 3"
            },
            {
              "value": "h4",
              "label": "Heading 4"
            },
            {
              "value": "h5",
              "label": "Heading 5"
            },
            {
              "value": "h6",
              "label": "Heading 6"
            }
          ],
          "default": "h2"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>",
          "label": "Content"
        },
        {
          "type": "select",
          "id": "vertical_alignment",
          "label": "Vertical alignment",
          "options": [
            {
              "value": "start",
              "label": "Top"
            },
            {
              "value": "center",
              "label": "Middle"
            },
            {
              "value": "end",
              "label": "Bottom"
            }
          ],
          "default": "center"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "label": "Text alignment",
          "options": [
            {
              "value": "start",
              "label": "Left"
            },
            {
              "value": "center",
              "label": "Center"
            },
            {
              "value": "end",
              "label": "Right"
            }
          ],
          "default": "start"
        },
        {
          "type": "header",
          "content": "Button settings"
        },
        {
          "type": "text",
          "id": "button_label",
          "default": "Button text",
          "label": "Button",
          "info": "Leave the label blank to hide the button."
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "button_type",
          "label": "Button style",
          "options": [
            { "group": "Primary color","value": "primary","label": "Primary" },
            { "group": "Primary color","value": "outline","label": "Outline" },
            { "group": "Primary color","value": "underlined","label": "Underlined" },
            { "group": "White color","value": "primary-white","label": "Solid White" },
            { "group": "White color","value": "outline-white","label": "Outline White" },
            { "group": "White color","value": "underlined-white","label": "Underlined White" },
            { "group": "Accent color","value": "secondary","label": "Secondary" }
          ],
          "default": "primary"
        },
        {
          "type": "checkbox",
          "id": "show_icon",
          "label": "Show arrow icon",
          "default": false
        },
        {
          "type": "header",
          "content": "Colors"
        },
        {
          "type": "color",
          "id": "bg_color",
          "label": "Background",
          "default": "#333333"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text",
          "default": "#ffffff"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Stacking Card",
      "category": "Content",
      "blocks": [
        {
          "type": "card"
        },
        {
          "type": "card"
        },
        {
          "type": "card"
        }
      ]
    }
  ]
}
{% endschema %}
